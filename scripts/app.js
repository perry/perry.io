!function(a){"function"==typeof define&&define.amd?define(a):window.Blazy=a()}(function(){"use strict";function a(a){if(!document.querySelectorAll){var d=document.createStyleSheet();document.querySelectorAll=function(a,b,c,e,f){for(f=document.all,b=[],a=a.replace(/\[for\b/gi,"[htmlFor").split(","),c=a.length;c--;){for(d.addRule(a[c],"k:v"),e=f.length;e--;)f[e].currentStyle.k&&b.push(f[e]);d.removeRule(0)}return b}}t=!0,q=[],n=a||{},n.error=n.error||!1,n.offset=n.offset||100,n.success=n.success||!1,n.selector=n.selector||".b-lazy",n.separator=n.separator||"|",n.container=n.container?document.querySelectorAll(n.container):!1,n.errorClass=n.errorClass||"b-error",n.breakpoints=n.breakpoints||!1,n.successClass=n.successClass||"b-loaded",n.src=m=n.src||"data-src",s=window.devicePixelRatio>1,u=l(c,25),v=l(h,50),h(),k(n.breakpoints,function(a){return a.width>=window.screen.width?(m=a.src,!1):void 0}),b()}function b(){g(n.selector),t&&(t=!1,n.container&&k(n.container,function(a){i(a,"scroll",u)}),i(window,"resize",v),i(window,"resize",u),i(window,"scroll",u)),c()}function c(){for(var b=0;r>b;b++){var c=q[b];(e(c)||f(c))&&(a.prototype.load(c),q.splice(b,1),r--,b--)}0===r&&a.prototype.destroy()}function d(a){if(a.offsetWidth>=0&&a.offsetHeight>=0){var b=a.getAttribute(m)||a.getAttribute(n.src);if(b){var c=b.split(n.separator),d=c[s&&c.length>1?1:0],e=new Image;k(n.breakpoints,function(b){a.removeAttribute(b.src)}),a.removeAttribute(n.src),e.onerror=function(){n.error&&n.error(a,"invalid"),a.className=a.className+" "+n.errorClass},e.onload=function(){"img"===a.nodeName.toLowerCase()?a.src=d:a.style.backgroundImage='url("'+d+'")',a.className=a.className+" "+n.successClass,n.success&&n.success(a)},e.src=d}else n.error&&n.error(a,"missing"),a.className=a.className+" "+n.errorClass}}function e(a){var b=a.getBoundingClientRect(),c=p+n.offset;return b.left>=0&&b.right<=o+n.offset&&(b.top>=0&&b.top<=c||b.bottom<=c&&b.bottom>=0-n.offset)}function f(a){return-1!==(" "+a.className+" ").indexOf(" "+n.successClass+" ")}function g(a){var b=document.querySelectorAll(a);r=b.length;for(var c=r;c--;q.unshift(b[c]));}function h(){p=window.innerHeight||document.documentElement.clientHeight,o=window.innerWidth||document.documentElement.clientWidth}function i(a,b,c){a.attachEvent?a.attachEvent&&a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)}function j(a,b,c){a.detachEvent?a.detachEvent&&a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)}function k(a,b){if(a&&b)for(var c=a.length,d=0;c>d&&b(a[d],d)!==!1;d++);}function l(a,b){var c=0;return function(){var d=+new Date;b>d-c||(c=d,a.apply(q,arguments))}}var m,n,o,p,q,r,s,t,u,v;return a.prototype.revalidate=function(){b()},a.prototype.load=function(a){f(a)||d(a)},a.prototype.destroy=function(){n.container&&k(n.container,function(a){j(a,"scroll",u)}),j(window,"scroll",u),j(window,"resize",u),j(window,"resize",v),r=0,q.length=0,t=!0},a}),function(){document.addEventListener("DOMContentLoaded",function(){new Blazy})}();